<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Test Carrito - Debug</title>
</head>
<body>
    <h1>Debug del Carrito</h1>
    <div id="output"></div>

    <script>
        const output = document.getElementById('output');

        // Verificar localStorage
        const cart = localStorage.getItem('neuraidev_cart');

        let html = '<h2>Estado del localStorage:</h2>';
        html += '<pre style="background: #f0f0f0; padding: 10px; border-radius: 5px;">';

        if (cart) {
            try {
                const parsedCart = JSON.parse(cart);
                html += `Cantidad de items: ${parsedCart.length}\n\n`;
                html += JSON.stringify(parsedCart, null, 2);
            } catch (e) {
                html += `Error al parsear: ${e.message}`;
            }
        } else {
            html += 'No hay items en el carrito (localStorage vacío)';
        }

        html += '</pre>';

        // Botón para agregar producto de prueba
        html += '<button onclick="agregarProductoPrueba()">Agregar Producto de Prueba</button>';
        html += '<button onclick="limpiarCarrito()">Limpiar Carrito</button>';

        output.innerHTML = html;

        window.agregarProductoPrueba = function() {
            const testProduct = {
                id: 'test-123',
                nombre: 'Producto de Prueba',
                precio: 99.99,
                imagen: 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'100\' height=\'100\'%3E%3Crect fill=\'%234CAF50\' width=\'100\' height=\'100\'/%3E%3C/svg%3E',
                imagenes: ['data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'100\' height=\'100\'%3E%3Crect fill=\'%234CAF50\' width=\'100\' height=\'100\'/%3E%3C/svg%3E'],
                cantidad: 1,
                categoria: 'test',
                stock: 10
            };

            const currentCart = JSON.parse(localStorage.getItem('neuraidev_cart') || '[]');
            currentCart.push(testProduct);
            localStorage.setItem('neuraidev_cart', JSON.stringify(currentCart));

            alert('Producto agregado! Recarga la página o ve a http://localhost:3001');
            location.reload();
        };

        window.limpiarCarrito = function() {
            localStorage.removeItem('neuraidev_cart');
            alert('Carrito limpiado!');
            location.reload();
        };
    </script>
</body>
</html>
